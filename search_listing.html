<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8"/>
	<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
	<title>Lost & Found - Search</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_forward"/>

	<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,100..900&display=swap" rel="stylesheet"/>

	<script src="https://cdn.tailwindcss.com?plugins=forms,typography,container-queries"></script>

<script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: {
                DEFAULT: "#4f46e5",
                light: "#6366f1",
              },
              secondary: "#ec4899",
              "background-light": "#f8fafc",
            },
            fontFamily: {
              display: ["Quicksand", "sans-serif"],
              inter: ["Inter", "sans-serif"],
            },
            borderRadius: {
              DEFAULT: "0.5rem",
              xl: '1rem',
            },
          },
        },
      };
  </script>

	
	<script>
	const initialItems = [
        {name: "Red Water Bottle", category: "Water Bottles", type: "Lost", date: "2025-11-28", location: "Gym", contact: "contact@example.com", description: "Stainless steel, small scratch on the side.", img: "image/p2.jpeg"},
        {name: "iPhone 13 (Found)", category: "Electronics", type: "Found", date: "2025-11-29", location: "Library Desk", contact: "admin@example.com", description: "Black case, cracked screen protector.", img: "image/p2.jpeg"},
        {name: "Black Leather Wallet", category: "Wallet", type: "Lost", date: "2025-11-30", location: "Cafeteria", contact: "user@example.com", description: "Contains student ID, no cash.", img: "image/p2.jpeg"},
        {name: "Car Keys", category: "Keychain", type: "Lost", date: "2025-12-01", location: "Parking Lot", contact: "keyuser@example.com", description: "Hyundai fob with fuzzy blue keychain.", img: "image/p2.jpeg"},
        {name: "Student ID Card", category: "IDs", type: "Found", date: "2025-12-01", location: "Admin Office", contact: "admin@example.com", description: "ID for John Doe, Class of 2026.", img: "image/p2.jpeg"},
    ];
    
    function loadDynamicItems() {
        const storedItems = localStorage.getItem('submittedReports');
        try {
            return storedItems ? JSON.parse(storedItems) : [];
        } catch (e) {
            console.error("Error parsing stored reports:", e);
            return [];
        }
    }

    const dynamicItems = loadDynamicItems();

    const allItems = [...initialItems, ...dynamicItems];
    
    // Function to initialize Swiper after content is rendered
    function initSwiper() {
        new Swiper('.swiper-container-custom', {
            loop: true,
            spaceBetween: 30,
            
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
                dynamicBullets: true,
            },
            
            navigation: {
                nextEl: '.swiper-button-next-custom',
                prevEl: '.swiper-button-prev-custom',
            },
            
            breakpoints: {
                0: {
                    slidesPerView: 1
                },
                768: {
                    slidesPerView: 2
                },
                1024: {
                    slidesPerView: 3
                },
            }
        });
    }

	function searchItems() {
        const text = document.getElementById("searchInput").value.toLowerCase();
        const category = document.getElementById("categoryInput").value;
        const gridContainer = document.getElementById("swiperGridContainer"); // Updated ID

        const results = allItems.filter(item =>
            (item.name.toLowerCase().includes(text) || item.description.toLowerCase().includes(text)) &&
            (category === "" || item.category === category)
        );

        if (results.length === 0) {
            gridContainer.innerHTML = "<p class='text-center text-xl text-gray-500 col-span-full mt-10'>No items found matching your search criteria.</p>";
            return;
        }

        // Build the HTML for the Swiper list
        const listHTML = results.map(item => {
            const badgeText = `${item.type} - ${item.category}`;
            
            return `
                <li class="card-item swiper-slide">
                    <a href="#" class="card-link">
                        <img src="${item.img || 'image/p2.jpeg'}" alt="${item.name}" class="card-image">
                        <p class="badge">${badgeText}</p>
                        <h2 class="card-title">${item.name}</h2>
                        <button class="card-button material-symbols-rounded">
                        arrow_forward
                        </button>
                    </a>
                </li>
            `;
        }).join('');

        // Full Swiper structure
        const swiperHTML = `
            <div class="card-wrapper swiper swiper-container-custom">
                <ul class="card-list swiper-wrapper">
                    ${listHTML}
                </ul>
                <div class="swiper-pagination"></div>
                <div class="swiper-slide-button swiper-button-prev swiper-button-prev-custom"></div>
                <div class="swiper-slide-button swiper-button-next swiper-button-next-custom"></div>
            </div>
        `;
        
        gridContainer.innerHTML = swiperHTML;
        
        // Re-initialize Swiper after content insertion
        initSwiper();
	}

    window.onload = searchItems;

	</script>

      <style>
    /* Tailwind Config CSS */
    .material-icons { font-size: inherit; }
	body {
 	font-family: 'Quicksand', sans-serif;
	background: #f8fafc;
	}

	.search {
	width: 100%;
	background: white;
	padding: 30px;
	display: flex;
	box-shadow: 0 2px 4px rgba(0,0,0,0.1);
	justify-content: center;
	gap: 5px;
	}

	.search input[type="text"] {
	width: 280px;
	padding: 10px 14px;
	border: 1px solid #bfbfbf;
	border-radius: 6px;
	font-size: 20px;
	outline: none;
	}

	.search button {
	padding: 10px 16px;
	background: #4f46e5;
	border: none;
	color: #fff;
	border-radius: 6px;
	cursor: pointer;
	font-size: 20px;
	}

	.search button:hover {
      background: #6366f1;
	}

	.search select {
 	padding: 10px 45px;
	font-size: 20px;
	border: 1px solid #bfbfbf;
	border-radius: 6px;
	outline: none;
	}

    /* Custom Card/Swiper CSS from the provided code */
    
    .container {
        margin-top: 2rem !important;
    }
    
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Inter", sans-serif;
    }
    .card-wrapper {
        max-width: 900px;
        margin: 0 60px 35px;
        padding: 20px 10px;
        overflow: hidden;
    }
    
    .card-list .card-item{
        list-style: none;
    }
    
    .card-list .card-item .card-link {
        user-select: none;
        display: block;
        background: #3c67ca; /* Fixed color based on Swiper code context */
        padding: 18px;
        border-radius: 12px;
        text-decoration: none;
        border: 2px solid transparent;
        box-shadow: 0 10px 10px rgba(0, 0, 0, 0.05);
        transition: 0.2s ease;
    }
    
    .card-list .card-item .card-link:active{
        cursor: grabbing;
    }
    
    .card-list .card-item .card-link:hover{
        border-color: #4f46e5; /* Using primary color for consistency */
    }
    .card-list .card-link .card-image {
        width: 100%;
        aspect-ratio: 16 / 9;
        object-fit: cover;
        border-radius: 10px;
    }
    
    .card-list .card-link .badge {
        color: #5372F0;
        padding: 8px 16px;
        font-size: 0.95rem;
        font-weight: 500;
        margin: 16px 0 18px;
        background: #DDE4FF;
        width: fit-content;
        border-radius: 50px;
    }
    
    .card-list .card-link .card-title {
        font-size: 1.19rem;
        color: white; /* Changed to white for contrast on blue card */
        font-weight: 600;
    }
    
    .card-list .card-link .card-button {
        height: 35px;
        width: 35px;
        color: rgb(255, 255, 255);
        border-radius: 50%;
        margin: 30px 0 5px;
        background: none;
        cursor: pointer;
        border: 2px solid rgb(255, 255, 255);
        transform: rotate(-45deg);
        transition: 0.4s ease;
        font-size: 1.25rem; /* Adjust icon size */
    }
    
    .card-list .card-link:hover .card-button {
        color: white;
        background: #4f46e5; /* Using primary color for consistency */
    }
    
    .card-wrapper .swiper-pagination-bullet {
        height: 13px;
        width: 13px;
        opacity: 0.5;
        background: #4f46e5; /* Using primary color for consistency */
    }
    .card-wrapper .swiper-pagination-bullet-active {
        opacity: 1;
    }
    .card-wrapper .swiper-slide-button {
        color: #4f46e5; /* Using primary color for consistency */
        margin-top: -35px;
    }
    
    @media screen and (max-width: 768px) {
        .card-wrapper{
            margin: 0 10px 25px
        }
        .card-wrapper .swiper-slide-button {
            display: none
        }
    }
</style>

</head>

<body class="font-display bg-background-light">
    
    <div class="flex flex-col min-h-screen" id="app">

    <header class="p-4 sm:px-6 flex justify-between items-center bg-background-light/80 backdrop-blur-sm sticky top-0 z-20 border-b border-slate-200">
        <div class="flex items-center space-x-2">
            <span class="material-icons text-primary text-3xl">fmd_good</span>
            <span class="font-bold text-xl">Lost and Found</span>
        </div>
        
        <nav class="hidden md:flex items-center space-x-6">
            <a class="text-slate-600 hover:text-primary transition-colors font-medium" href="index.html">Home</a>
            <a class="text-primary hover:text-primary transition-colors font-bold" href="search_listing.html">Lost & Found Items</a>
            <a class="text-slate-600 hover:text-primary transition-colors font-medium" href="report_form.html">Create a Post</a>
        </nav>

        <button class="p-2 rounded-full hover:bg-slate-200 md:hidden" id="menu-button">
            <span class="material-icons text-3xl">menu</span>
        </button>
    </header>

    <div class="fixed inset-0 bg-background-light z-50 transform -translate-x-full transition-transform duration-300 ease-in-out md:hidden" id="mobile-menu">
        <div class="flex justify-between items-center p-4 border-b border-slate-200 ">
            <div class="flex items-center space-x-2">
                <span class="material-icons text-primary text-3xl">fmd_good</span>
                <span class="font-bold text-xl">Lost and Found</span>
            </div>
            <button class="p-2 rounded-full hover:bg-slate-200 " id="close-menu-button">
                <span class="material-icons text-3xl">close</span>
            </button>
        </div>
        <nav class="flex flex-col p-4 space-y-4">
            <a class="block px-4 py-3 rounded-lg text-lg hover:bg-slate-100" href="index.html">Home</a>
            <a class="block px-4 py-3 rounded-lg text-lg text-primary hover:bg-slate-100 font-bold" href="search_listing.html">Lost & Found Items</a>
            <a class="block px-4 py-3 rounded-lg text-lg hover:bg-slate-100" href="report_form.html">Create a Post</a>
        </nav>
    </div>

    <main class="flex-grow px-4 sm:px-6 py-8">
        <div class="max-w-7xl mx-auto">
            <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Search Items</h1>
            <div class="search">
                <input id="searchInput" type="text" placeholder="What are you looking for?" onkeyup="searchItems()">
                <select id="categoryInput" onchange="searchItems()">
                <option value="">Select a category</option>
                <option>Wallet</option>
                <option>Keychain</option>
                <option>Electronics</option>
                <option>Accessories</option>
                <option>Wardrobe</option>
                <option>Water Bottles</option>
                <option>Stationery</option>
                <option>IDs</option>
                </select>
                <button onclick="searchItems()">Search</button>
            </div>
                        <div id="swiperGridContainer" class="container"></div>
        </div>
    </main>

    <footer class="bg-slate-100 text-slate-600 py-10 px-4 sm:px-6 mt-12">
        <div class="max-w-7xl mx-auto">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h3 class="font-bold text-slate-800 mb-4">Site</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a class="hover:text-primary" href="search_listing.html">Lost & Found Items</a></li>
                        <li><a class="hover:text-primary" href="report_form.html">Report Lost & Found</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-slate-800 mb-4">Help</h3>
                    <ul class="space-y-2 text-sm">
                        <li><a class="hover:text-primary" href="#">Customer Support</a></li>
                        <li><a class="hover:text-primary" href="#">Terms & Conditions</a></li>
                        <li><a class="hover:text-primary" href="#">Privacy Policy</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-bold text-slate-800 mb-4">Social</h3>
                    <div class="flex space-x-4">
                        <a class="text-slate-500 hover:text-primary" href="#">
                            <img
                            src="https://lh3.googleusercontent.com/aida-public/AB6AXuAByeQqp4mysv-jWU3S5YuDIhINoUmuj-496S2jcjg6rgfbbghuAEruBd78vEhs0bl9VQK7qMyxxUDxvdGRs9CtG9GKyFWAKvmywHrSzVdALrly92o1_EZfvq2yY7aPNx31BNmCjJkBL5tp3rw-XZk3uICIKbTdN9PCLnlONgV2avWN7Po68YtXHE3rMt"
                            alt="social media X icon"
                            class="w-6 h-6"
                            />
                        </a>
                    </div>
                </div>
                
                </div>
            </div>
        </div>
    </footer>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const menuButton = document.getElementById('menu-button');
            const closeMenuButton = document.getElementById('close-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            menuButton.addEventListener('click', function() {
                mobileMenu.classList.remove('-translate-x-full');
            });
            closeMenuButton.addEventListener('click', function() {
                mobileMenu.classList.add('-translate-x-full');
            });
        });
    </script>
</body>
</html>
